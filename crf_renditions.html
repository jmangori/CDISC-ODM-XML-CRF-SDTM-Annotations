<!--
   crf_renditions.html

   Copyright 2022 JMIDK <jmi@try2.info>

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
   MA 02110-1301, USA.


-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>CRF Renditions</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="generator" content="Geany 1.36" />
  </head>
  <body>
    <h1>CRF Renditions</h1>
    <p>A short description of the CRF generated from the ODM-xml document.</p>
    <h2>CRF layout</h2>
    <p>The main feature of the CRF layout presented here is to put the SDTM annotations in a column adjacent to each question line. This way, the SDTM annotations are displayed at the proper location, but without the need to move boxes of annotations around inside and on top of CRF elements.</p>
    <img src="images/CRF.png" alt="Example CRF rendition from pure ODM-xml"/>
    <p>
      The CRF rendition consists of one table for each form in the CRF identified as <strong>FormDef</strong> tags.
      <ul>
        <li>The 1<sup>st</sup> column is a sequence number constructed entirely form the <strong>OrderNumber</strong> attributes at different tags in the ODM-xml file. The number serves as a human reference when discussing and reviewing CRF content, as well as keeping track of the sorting of CRF elements.</li>
        <li>The 2<sup>nd</sup> column is the question from the CRF forms identified as <strong>Question/TranslatedText</strong> tags.</li>
        <li>The 3<sup>rd</sup> column is the answer to the question distinguised by <strong>DataType</strong> attributes. Each data type is displayed as a browser specific interpretation of an HTML tag of the corresponding type. As no indication of multiple selects exist in the ODM definition, this data type is extracted from the text itself.</li>
        <li>The 4<sup>th</sup> column is the SDTM annotation identified as <strong>@SDSVarName</strong> attributes. Additional information is added from <strong>Alias/@Name</strong> attributes having a <strong>@Context='SDTM'</strong> attribut as SDTM annotation marker. Each sentence in the SDTM annotation is presented on a line of its own for readability.</li>
      </ul>
    </p>
    <h2>Design choises</h2>
    <p>All vendor specific name spaces and XML addendums to the ODM-XML file are ignored.</p>
    <p>The following assumptions regarding the specifics of the ODM-XML file's XPATH's are in effect:</p>
    <table border="1">
      <thead>
        <th>CRF element</th>
        <th>XPath</th>
      </thead>
      <tbody>
        <tr>
          <td>Form Title/Name</td>
          <td>FormDef/Description/TranslatedText</td>
        </tr>
        <tr>
          <td>Section  Title/Name</td>
          <td>Not shown</td>
        </tr>
        <tr>
          <td>Question Text</td>
          <td>ItemGroupDef/Description/TranslatedText</td>
        </tr>
        <tr>
          <td>Prompt</td>
          <td>ItemDef/Alias[@Context="prompt"]</td>
        </tr>
        <tr>
          <td>Completion Instructions</td>
          <td>ItemDef/Alias[@Context="completionInstructions"]</td>
        </tr>
        <tr>
          <td>Implementation Notes</td>
          <td>ItemGroupDef/Alias[@Context="implementationNotes"]<br/>ItemDef/Alias[@Context="implementationNotes"]</td>
        </tr>
        <tr>
          <td>Mapping Instructions</td>
          <td>ItemGroupDef/@Domain + ItemDef/@SDSVarName + ItemDef/Alias[@Context='SDTM']/@Name</td>
        </tr>
        <tr>
          <td>CDASH</td>
          <td>ItemDef/Alias[@Context="CDASH"]</td>
        </tr>
        <tr>
          <td>SDTM</td>
          <td>ItemDef/Alias[@Context="SDTM"]</td>
        </tr>
      </tbody>
    </table>
    <p>Great inspiration as well as the CRF contens, is taken from the examples on the CDISC website. I have made very few design choises of my own. These do include a cleanup of the SDTM annotations, such as</p>
    <ul>
      <li>All text constants are enclosed in quotation marks</li>
      <li>Consistent use of single quotation marks in the SDTM annotations</li>
      <li>Ommision of table border for additions to the CRF itself</li>
      <li>Addition of a reference number for each CRF question. This has proved usefull when revieving CRFs</li>
      <li>Instructions/notes are written using a smaller font and in <i>italics</i></li>
    </ul>
    <h2>Creating PDF documents</h2>
    <p>In all browsers, print the CRF renditions as PDF documents on your disk as either <strong>acrf</strong> or <strong>bcrf</strong> submission documents, respectively. Please note:</p>
    <ul>
      <li>The on-screen buttons are not included in PDF documents created by printing to a PDF file</li>
      <li>The TOC will work correctly as links within the PDF documents</li>
      <li>Form names in the visit matrix works as links as well</li>
      <li>All space delimited words in the SDTM annotations have link targets, reachable from <strong>define-xml</strong>, when CRF origins are created as named destinations of SDTM variables</li>
      <li>The yellow background color of the SDTM annotations requires printing of background graphics to be part of PDF documents</li>
      <li>Headers and footers, portrait versus landscape, and other document properties can be controlled within the printing dialog of your browser</li>
    </ul>
  </body>
</html>
